<app-navbar class="bg-secondary" id="nav-game-page"></app-navbar>

<style>
  /*.navbar .navbar-brand img {*/
  /*  height: 40px;*/
  /*  margin: 10px;*/
  /*}*/
  .hm-gradient {
    background: linear-gradient(40deg, rgba(0, 51, 199, .3), rgba(209, 149, 249, .3));
  }

  .heading {
    margin: 0 6rem;
    font-size: 3.8rem;
    font-weight: 700;
    color: #5d4267;
  }

  .subheading {
    margin: 2.5rem 6rem;
    color: #5d4267;
  }

  .btn.btn-margin {
    margin-left: 6rem;
    margin-top: 3rem;
  }

  .btn.btn-lily {
    background: linear-gradient(40deg, rgba(0, 51, 199, .7), rgba(124, 22, 191, 0.7));
    color: #fff;
  }

  .title {
    margin-top: 6rem;
    margin-bottom: 2rem;
    color: #5d4267;
  }

  .subtitle {
    color: #bcb2c0;
    margin-left: 20%;
    margin-right: 20%;
    margin-bottom: 6rem;
  }

</style>

<!-- Main navigation -->
<header>

  <!-- Intro -->
  <section class="view">

    <div class="row">

      <div class="col-md-6">

        <div class="d-flex flex-column justify-content-center align-items-center h-100">
          <h1 class="heading font-weight-light">{{game.title}}</h1>
          <hr>
          <h4 class="subheading font-weight-light">
            <div style="font-size: 20px">Lead developers:</div>
            <div *ngFor="let developer of game.developers ; let isLast=last ">
              {{developer.name}}{{isLast ? '' : '      , '}}
            </div>
            <hr>

            <div style="font-size: 20px">Categories: </div>
            <div *ngFor="let category of game.categories; let isLast=last" class="d-inline-flex"
                 >{{category.name}}{{isLast ? '' : ', '}}</div>


            <div class="mr-auto mt-5">
              <!--              <button type="button" class="btn btn-lily btn-rounded">Get started <i class="fa fa-caret-right ml-3"></i></button>-->
              <button [disabled]="game.stock==0"
                      [ngClass]="{'btn-danger': game.stock==0||currentUser.penalties.length>1}"
                      [innerHTML]="game.stock==0?'Out of stock':(currentUser.penalties.length>1?'Blocked':'Play!')"
                      class="button"
                      (click)="rent()"></button>

            </div>

            <div class="rating">
              <div class="star-ratings-sprite">
                <span class="star-ratings-sprite-rating" [ngStyle]="{'width.%': game.averageStars/5 * 100}"></span>
              </div>
              <p>{{game.averageStars | number:'1.2-2'}}</p>
            </div>

            <p>In stock: {{game.stock}}</p>

            <p>Publisher: {{game.gameStudio}}</p>

            <p>Release year: {{game.year}}</p>

            <div *ngIf="game">
              <p>Description: {{game.description}}</p>
            </div>

          </h4>

        </div>

      </div>

      <div class="col-md-6">

        <div class="view mt-2">
          <div *ngIf="'game.img', else nonImg">
            <img class="" [src]="'data:image/jpeg;base64,'+game.img.pic">
          </div>
          <ng-template #nonImg>
            <img src="https://abeon-hosting.com/images/default-png-9.png">
          </ng-template>

          <div class="mask flex-center hm-gradient">
          </div>
        </div>

      </div>

    </div>

  </section>
  <!-- Intro -->

</header>
<!-- Main navigation -->

<!--***************************************************-->
<div class="container">

  <p></p>
  <div style="margin-top: 100px">
    <h5 class="subheading font-weight-light" id="hh5">You might also like</h5>
  </div>

  <div class="row mt-3">
    <div
      *ngFor="let game of suggestedGames | paginate: { id: 'gamePagination',itemsPerPage: 5, currentPage: 0,totalItems: paginatedGames.nrOfElements}">

      <div class="col-md-3 col-sm-6 mb-4">
        <img class="shadowed" [src]="'data:image/jpeg;base64,'+game.img.pic" height="200" width="200"
             [routerLink]="['/game-page']" [queryParams]="{gameId: game.id}" (click)="changeGame(game.id)">
      </div>
    </div>
  </div>

</div>


<body *ngIf="game">
<div class="row bootstrap snippets">
  <!-- <div class="col-md-6 col-md-offset-2 col-sm-12"> -->

  <div class="comment-wrapper">
    <div class="card">
      <div class="card-body">
        <div class="title-rate">
          <p class="card-title">
            Add a review
          </p>
          <div class="rate">
            <input type="radio" id="star5" name="rate" value="5" [(ngModel)]="ratingValue"/>
            <label for="star5" title="text">5 stars</label>
            <input type="radio" id="star4" name="rate" value="4" [(ngModel)]="ratingValue"/>
            <label for="star4" title="text">4 stars</label>
            <input type="radio" id="star3" name="rate" value="3" [(ngModel)]="ratingValue"/>
            <label for="star3" title="text">3 stars</label>
            <input type="radio" id="star2" name="rate" value="2" [(ngModel)]="ratingValue"/>
            <label for="star2" title="text">2 stars</label>
            <input type="radio" id="star1" name="rate" value="1" [(ngModel)]="ratingValue"/>
            <label for="star1" title="text">1 star</label>
          </div>
        </div>

        <label>
        <textarea class="form-control" [(ngModel)]="descriptionValue" placeholder="write the review..."
                  rows="4" style="width: 630%"></textarea>
        </label>

        <br>
        <button type="button" class="btn btn-info pull-right"
                [disabled]="!ratingValue ? 'disabled': ''" (click)="printValue()">
          Submit!
        </button>
        <div class="clearfix"></div>
      </div>
    </div>

    <div class="panel panel-info">
      <div id="comment-content" class="panel-body scrollbar-custom-style" *ngIf="paginatedRatings">
        <hr>
        <ul class="media-list "
            *ngFor="let comment of ratings | paginate: { id: 'reviewPagination',itemsPerPage: 3, currentPage: p,totalItems: paginatedRatings.nrOfElements}">
          <li class="media">
            <img [src]="'data:image/jpeg;base64,'+comment.user.img.pic" alt="" class="img-circle">
            <div class="media-body">
              <div class="comment-header">
                                <span class="text-muted pull-right">
                                    <small class="text-muted">{{comment.date}} </small>
                                </span>
                <strong class="text-success">@{{comment.user.firstName}} {{comment.user.lastName}}</strong>
                <div class="rating" id="comment-stars">
                  <div class="star-ratings-sprite" id="stars-for-comment">
                    <span class="star-ratings-sprite-rating" [ngStyle]="{'width.%': comment.value/5 * 100}"></span>
                  </div>
                  <p id="comment-value">{{comment.value | number:'1.2-2'}}</p>
                  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
                </div>
              </div>
              <p>
                {{comment.description}}
              </p>
            </div>
          </li>

        </ul>
        <div class="text-center">
          <pagination-controls id="reviewPagination" (pageChange)="pageGridChanged($event)"></pagination-controls>
        </div>
      </div>
    </div>
  </div>
</div>
</body>
